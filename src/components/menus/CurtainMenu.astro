---
import Logo from "../logo/Logo.astro";
---

<div>
  <nav class="font-black text-white text-shadow-outline text-3xl flex justify-between items-center p-2 bg-gradient-to-b dark:from-black from-white to-transparent">
    <a href="/" class="p-4 w-[8rem] flex items-center"><Logo /></a>
    <button id="menu-open" aria-label="Open menu" class="p-3 bg-black rounded-lg flex items-center">
      <i class="ti ti-menu-2"></i>
    </button>
  </nav>
  <div
    id="curtain-menu"
    class="fixed inset-0 flex justify-center items-center dark:bg-black/80 bg-white/80 text-3xl font-black text-white text-shadow-outline z-50 translate-x-full transition-transform duration-300"
    role="dialog"
    aria-modal="true"
    tabindex="-1"
    style="pointer-events:none"
  >
    <ul class="flex flex-col justify-center items-center space-y-8">
      <li><a href="/#live" class="p-4 menu-link">Live</a></li>
      <li><a href="/#music" class="p-4 menu-link">Musik</a></li>
      <li><a href="/videos" class="p-4 menu-link">Videos</a></li>
      <li><a href="/gallery" class="p-4 menu-link">Gallerie</a></li>
      <li><a href="/shop" class="p-4 menu-link">Shop</a></li>
      <li><a href="/contact" class="p-4 menu-link">Kontakt</a></li>
      <li>
        <button id="menu-close" class="p-3 bg-black rounded-lg" aria-label="Close menu">
          <i class="ti ti-x"></i>
        </button>
      </li>
    </ul>
  </div>
</div>

<script is:inline>
window.addEventListener('DOMContentLoaded', () => {
  const openBtn = document.getElementById('menu-open');
  const closeBtn = document.getElementById('menu-close');
  const menu = document.getElementById('curtain-menu');
  const links = menu.querySelectorAll('.menu-link');
  function openMenu() {
    menu.classList.remove('translate-x-full');
    menu.classList.add('translate-x-0');
    menu.style.pointerEvents = 'auto';
    menu.focus();
  }
  function closeMenu() {
    menu.classList.add('translate-x-full');
    menu.classList.remove('translate-x-0');
    menu.style.pointerEvents = 'none';
    openBtn.focus();
  }
  openBtn.addEventListener('click', openMenu);
  closeBtn.addEventListener('click', closeMenu);
  menu.addEventListener('click', e => { if (e.target === menu) closeMenu(); });
  links.forEach(link => link.addEventListener('click', closeMenu));
});
</script>